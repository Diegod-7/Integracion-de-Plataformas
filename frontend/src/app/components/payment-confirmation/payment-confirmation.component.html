<div class="container mt-4">
  <div class="card">
    <div class="card-body text-center">
      <div *ngIf="loading">
        <div class="spinner-border text-primary" role="status">
          <span class="visually-hidden">Cargando...</span>
        </div>
        <p class="mt-3">Procesando tu pago...</p>
      </div>

      <div *ngIf="!loading && success">
        <i class="fas fa-check-circle text-success" style="font-size: 4rem;"></i>
        <h3 class="mt-3">¡Pago exitoso!</h3>
        <p>Tu compra ha sido procesada correctamente.</p>
        <div class="text-start">
          <p><strong>Número de orden:</strong> {{orderNumber}}</p>
          <p><strong>Monto:</strong> ${{amount}}</p>
          <p><strong>Código de autorización:</strong> {{authorizationCode}}</p>
          <p><strong>Últimos dígitos tarjeta:</strong> {{cardNumber}}</p>
          <p><strong>Fecha de transacción:</strong> {{transactionDate | date:'dd/MM/yyyy HH:mm:ss'}}</p>
        </div>
        <button class="btn btn-primary mt-3" routerLink="/products">
          Volver a la tienda
        </button>
      </div>

      <div *ngIf="!loading && !success">
        <i class="fas fa-times-circle text-danger" style="font-size: 4rem;"></i>
        <h3 class="mt-3">Error en el pago</h3>
        <p>{{errorMessage}}</p>
        <div *ngIf="responseCode !== null" class="text-start mt-3">
          <p><strong>Código de respuesta:</strong> {{responseCode}}</p>
          <p><strong>Detalle:</strong></p>
          <ul>
            <li *ngIf="responseCode === -1">Rechazo - Posible error en el ingreso de datos de la tarjeta</li>
            <li *ngIf="responseCode === -2">Rechazo - Posible error en el ingreso de datos del comercio</li>
            <li *ngIf="responseCode === -3">Rechazo - Error interno de Webpay</li>
            <li *ngIf="responseCode === -4">Rechazo - Rechazado por parte del emisor</li>
            <li *ngIf="responseCode === -5">Rechazo - Transacción con riesgo de fraude</li>
          </ul>
        </div>
        <button class="btn btn-primary mt-3" routerLink="/cart">
          Volver al carrito
        </button>
      </div>
    </div>
  </div>
</div> 